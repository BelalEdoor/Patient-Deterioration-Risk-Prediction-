# ğŸ¥ Hospital Patient Deterioration Risk Prediction System
# Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø®Ø·Ø± ØªØ¯Ù‡ÙˆØ± Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰

A complete end-to-end machine learning platform for predicting patient deterioration risk in hospitals using FastAPI and React.

Ù…Ù†ØµØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„ÙŠ Ù„Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø®Ø·Ø± ØªØ¯Ù‡ÙˆØ± Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙÙŠ Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… FastAPI Ùˆ React.

## ğŸŒŸ Features / Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª

### Backend (FastAPI)
- âœ… Complete REST API for model training and predictions
- âœ… Random Forest Classifier with class weight balancing
- âœ… Real-time patient risk assessment
- âœ… Batch prediction support
- âœ… Model persistence and versioning
- âœ… Comprehensive error handling

### Frontend (React)
- âœ… Modern, responsive UI design
- âœ… Dashboard with statistics and metrics
- âœ… Patient data entry form with validation
- âœ… Model training interface with drag-and-drop
- âœ… Prediction history tracking
- âœ… Real-time risk visualization
- âœ… Clinical recommendations generation

## ğŸ“‹ Requirements / Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª

### Backend
- Python 3.8+
- FastAPI
- scikit-learn
- pandas
- numpy
- uvicorn

### Frontend
- Node.js 14+
- React 18
- React Router

## ğŸš€ Installation & Setup / Ø§Ù„ØªØ«Ø¨ÙŠØª ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯

### 1ï¸âƒ£ Backend Setup

```bash
# Navigate to backend directory
cd hospital-platform/backend

# Create virtual environment (optional but recommended)
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Run the server
python main.py
```

The backend will run on: `http://localhost:8000`

**API Documentation:** `http://localhost:8000/docs`

### 2ï¸âƒ£ Frontend Setup

```bash
# Navigate to frontend directory
cd hospital-platform/frontend

# Install dependencies
npm install

# Start development server
npm start
```

The frontend will run on: `http://localhost:3000`

## ğŸ“Š Dataset Requirements / Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

Your training dataset (CSV file) must include the following columns:

ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ù…Ù„Ù Ø§Ù„ØªØ¯Ø±ÙŠØ¨ (CSV) Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©:

### Required Features / Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- `age` - Patient age (Ø§Ù„Ø¹Ù…Ø±)
- `gender` - 0: Female, 1: Male (Ø§Ù„Ø¬Ù†Ø³)
- `heart_rate` - Heart rate in bpm (Ù…Ø¹Ø¯Ù„ Ù†Ø¨Ø¶Ø§Øª Ø§Ù„Ù‚Ù„Ø¨)
- `respiratory_rate` - Respiratory rate (Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙ†ÙØ³)
- `spo2_pct` - Oxygen saturation percentage (Ù†Ø³Ø¨Ø© ØªØ´Ø¨Ø¹ Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†)
- `temperature_c` - Body temperature in Celsius (Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©)
- `systolic_bp` - Systolic blood pressure (Ø¶ØºØ· Ø§Ù„Ø¯Ù… Ø§Ù„Ø§Ù†Ù‚Ø¨Ø§Ø¶ÙŠ)
- `diastolic_bp` - Diastolic blood pressure (Ø¶ØºØ· Ø§Ù„Ø¯Ù… Ø§Ù„Ø§Ù†Ø¨Ø³Ø§Ø·ÙŠ)
- `wbc_count` - White blood cell count (Ø¹Ø¯Ø¯ ÙƒØ±ÙŠØ§Øª Ø§Ù„Ø¯Ù… Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡)
- `lactate` - Lactate level (Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù„Ø§ÙƒØªØ§Øª)
- `creatinine` - Creatinine level (Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙƒØ±ÙŠØ§ØªÙŠÙ†ÙŠÙ†)
- `crp_level` - C-reactive protein level (Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ† Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ)
- `hemoglobin` - Hemoglobin level (Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù‡ÙŠÙ…ÙˆØºÙ„ÙˆØ¨ÙŠÙ†)
- `oxygen_flow` - Oxygen flow rate (Ù…Ø¹Ø¯Ù„ ØªØ¯ÙÙ‚ Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†)
- `oxygen_device` - 0: None, 1: Nasal, 2: Mask, 3: Ventilator (Ø¬Ù‡Ø§Ø² Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†)
- `nurse_alert` - 0: No, 1: Yes (ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ù…Ø±Ø¶)
- `mobility_score` - 0-4 scale (Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±ÙƒØ©)
- `comorbidity_index` - Number of comorbidities (Ù…Ø¤Ø´Ø± Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù…ØµØ§Ø­Ø¨Ø©)

### Target Variable / Ø§Ù„Ù…ØªØºÙŠØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù:
- `deterioration_next_12h` - 0: No deterioration, 1: Deterioration (Ø§Ù„ØªØ¯Ù‡ÙˆØ± Ø®Ù„Ø§Ù„ 12 Ø³Ø§Ø¹Ø©)

## ğŸ¯ Usage Guide / Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Step 1: Train the Model / Ø§Ù„Ø®Ø·ÙˆØ© 1: ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬

1. Navigate to "Train Model" page
2. Upload your CSV dataset
3. Click "Start Training"
4. Wait for training to complete
5. Review the performance metrics

### Step 2: Predict Patient Risk / Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø®Ø·Ø± Ø§Ù„Ù…Ø±ÙŠØ¶

1. Navigate to "Predict Patient" page
2. Fill in patient information:
   - Basic info (age, gender)
   - Vital signs (heart rate, BP, SpO2, temperature)
   - Lab results (WBC, lactate, creatinine, etc.)
   - Clinical interventions
3. Click "Predict Risk"
4. Review the risk assessment and recommendations

### Step 3: View History / Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¬Ù„

1. Navigate to "Patient History" page
2. Search or filter predictions
3. View detailed prediction results
4. Export data if needed

## ğŸ“¡ API Endpoints / Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§ÙŠØ©

### Health Check
```http
GET /
```

### Train Model
```http
POST /train
Content-Type: multipart/form-data
Body: CSV file
```

### Predict Single Patient
```http
POST /predict
Content-Type: application/json
Body: Patient data JSON
```

### Batch Predictions
```http
POST /predict/batch
Content-Type: application/json
Body: Array of patient data
```

### Model Status
```http
GET /model/status
```

## ğŸ¨ Risk Categories / ÙØ¦Ø§Øª Ø§Ù„Ø®Ø·Ø±

- **High Risk (Ø®Ø·Ø± Ø¹Ø§Ù„ÙŠ)**: Risk score â‰¥ 70%
  - Urgent clinical intervention required
  - Consider ICU transfer
  
- **Medium Risk (Ø®Ø·Ø± Ù…ØªÙˆØ³Ø·)**: Risk score 40-69%
  - Enhanced monitoring recommended
  - Frequent vital signs assessment
  
- **Low Risk (Ø®Ø·Ø± Ù…Ù†Ø®ÙØ¶)**: Risk score < 40%
  - Continue routine monitoring
  - Standard care protocols

## ğŸ“ˆ Model Performance / Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬

The system uses a **Random Forest Classifier** with:
- Class weight balancing to handle imbalanced data
- 300 trees (n_estimators)
- Optimized for high recall (sensitivity) to minimize false negatives

Key Metrics:
- **Accuracy**: Overall correctness
- **Precision**: Positive prediction reliability
- **Recall**: Ability to catch deteriorating patients (MOST IMPORTANT)
- **F1-Score**: Balance between precision and recall
- **ROC-AUC**: Overall discriminative ability

## ğŸ”§ Configuration / Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

### Backend Configuration
Edit `backend/main.py` to customize:
- Model parameters (n_estimators, max_depth, etc.)
- Risk thresholds
- Feature engineering
- Class weights

### Frontend Configuration
Edit frontend files to customize:
- UI colors and styling
- Risk category thresholds
- Form validation rules
- Display formats

## ğŸ“ Project Structure / Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

```
hospital-platform/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py              # FastAPI application
â”‚   â”œâ”€â”€ requirements.txt     # Python dependencies
â”‚   â””â”€â”€ models/             # Saved models directory
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ index.html
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # Reusable components
â”‚   â”‚   â”œâ”€â”€ pages/          # Page components
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PredictPatient.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TrainModel.jsx
â”‚   â”‚   â”‚   â””â”€â”€ PatientHistory.jsx
â”‚   â”‚   â”œâ”€â”€ App.jsx         # Main app component
â”‚   â”‚   â”œâ”€â”€ App.css         # Global styles
â”‚   â”‚   â””â”€â”€ index.js        # Entry point
â”‚   â””â”€â”€ package.json        # Node dependencies
â”‚
â””â”€â”€ README.md               # This file
```

## ğŸ”’ Security Considerations / Ø§Ø¹ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†

âš ï¸ **Important for Production:**

1. **HTTPS**: Use HTTPS in production
2. **Authentication**: Add user authentication
3. **Authorization**: Implement role-based access
4. **Data Privacy**: Ensure HIPAA/GDPR compliance
5. **Input Validation**: Already implemented, but review for your use case
6. **Rate Limiting**: Consider adding API rate limiting
7. **Logging**: Add comprehensive logging for audits

## ğŸ› Troubleshooting / Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

### Backend Issues

**Issue**: Module not found
```bash
pip install -r requirements.txt --break-system-packages
```

**Issue**: Port 8000 already in use
```bash
# Change port in main.py
uvicorn.run(app, host="0.0.0.0", port=8001)
```

### Frontend Issues

**Issue**: Node modules error
```bash
rm -rf node_modules package-lock.json
npm install
```

**Issue**: CORS errors
- Ensure backend is running on port 8000
- Check CORS configuration in `main.py`

## ğŸ“ Sample Dataset / Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©

A sample dataset structure:

```csv
patient_id,age,gender,heart_rate,respiratory_rate,spo2_pct,temperature_c,systolic_bp,diastolic_bp,wbc_count,lactate,creatinine,crp_level,hemoglobin,oxygen_flow,oxygen_device,nurse_alert,mobility_score,comorbidity_index,deterioration_next_12h
P001,65,1,95,18,96,37.2,130,80,8.5,1.2,1.1,5,13.5,2,1,0,3,2,0
P002,72,0,110,22,91,38.1,145,85,12.3,2.8,1.8,45,11.2,4,2,1,1,4,1
```

## ğŸ¤ Contributing / Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©

Contributions are welcome! Please feel free to submit pull requests or open issues.

## ğŸ“„ License / Ø§Ù„ØªØ±Ø®ÙŠØµ

This project is provided as-is for educational and research purposes.

## ğŸ‘¥ Authors / Ø§Ù„Ù…Ø¤Ù„ÙÙˆÙ†

Based on the Patient Deterioration Risk Prediction project by:
- Belal Edoor
- Mohammad Alhoor

## ğŸ“ Support / Ø§Ù„Ø¯Ø¹Ù…

For questions or issues, please open an issue on GitHub.

---

## ğŸš€ Quick Start / Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©

```bash
# Terminal 1 - Backend
cd hospital-platform/backend
pip install -r requirements.txt
python main.py

# Terminal 2 - Frontend
cd hospital-platform/frontend
npm install
npm start
```

Then open http://localhost:3000 in your browser!

Ø«Ù… Ø§ÙØªØ­ http://localhost:3000 ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­!

---

**Made with â¤ï¸ for Healthcare / ØµÙÙ†Ø¹ Ø¨Ø­Ø¨ Ù„Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ©**